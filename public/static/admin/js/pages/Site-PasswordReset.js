"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[978],{8544:(t,s,a)=>{a.r(s),a.d(s,{default:()=>o});var r=a(5838);a(3073);const e={name:"SitePasswordReset",props:{urls:Object,configs:Object},data:function(){return{trans:{},footer:{},logo:null,backgrounds:[],updating:!1,reset_error:null,reset_form:{password:null,password_confirmation:null}}},created:function(){this.getUI()},mounted:function(){},watch:{"reset_form.password":function(t){this.filled(t)&&(this.reset_error=null)},"reset_form.password_confirmation":function(t){this.filled(t)&&(this.reset_error=null)}},methods:{getUI:function(){var t=this;axios.get(this.urls.api_ui).then((function(s){t.trans=s.data.data.trans,t.footer=s.data.data.footer,t.logo=s.data.data.logo,t.backgrounds=s.data.data.backgrounds})).finally((function(){t.$nextTick((function(){t.applySwiper()}))}))},submitPassword:function(t){13===t.keyCode&&this.resetPassword()},resetPassword:function(){var t=this,s=Object.assign({},this.reset_form);s.password=this.passwordEncrypt(s.password,7),s.password_confirmation=this.passwordEncrypt(s.password_confirmation,10),this.updating=!0,axios.put(this.urls.api_update,s).then((function(s){"0000"===s.data.code&&(t.filled(t.array_get(s.data.data,"redirect_to"))?location.href=s.data.data.redirect_to:(t.updating=!1,t.reset_error=s.data.message))})).catch((function(s){t.updating=!1,t.reset_error=s.response.data.message}))},applySwiper:function(){this.filled(this.backgrounds)&&new r.Z("#login-swiper",{allowTouchMove:!1,autoplay:{delay:3e3},effect:"fade",speed:1e3})},passwordEncrypt:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(this.blank(t))return null;var a=btoa(escape(t)),r=document.head.querySelector('meta[name="csrf-token"]').content;return a.substr(0,s)+r.substr(0,s+2)+a.substr(s)+r.substr(s+2)}}};const o=(0,a(1900).Z)(e,(function(){var t=this,s=t._self._c;return s("div",{staticClass:"wrapper user-login2"},[s("div",{staticClass:"login-container container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-auto col text-center"},[s("div",{staticClass:"login-content text-center text-sm-left"},[t.filled(t.logo)?s("h1",{staticClass:"text-main h3"},[s("span",{staticClass:"login-logo d-block d-sm-inline"},[s("img",{staticClass:"mb-3",staticStyle:{"max-height":"42px"},attrs:{src:t.logo,alt:""}})]),s("br"),s("span",{staticClass:"d-block d-sm-inline"},[t._v(t._s(t.array_get(t.trans,"title")))])]):s("h1",{staticClass:"text-main h3"},[s("span",{staticClass:"d-block d-sm-inline"},[t._v(t._s(t.array_get(t.trans,"title")))])]),t._v(" "),s("div",{staticClass:"login-form mt-4",on:{keypress:function(s){return t.submitPassword(s)}}},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-auto col-form-label",attrs:{for:"password-reset-password"}},[t._v("\n                "+t._s(t.array_get(t.trans,"module.password"))+"\n              ")]),t._v(" "),s("div",{staticClass:"col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.reset_form.password,expression:"reset_form.password"}],staticClass:"form-control",attrs:{id:"password-reset-password",type:"password",autocomplete:"off",required:""},domProps:{value:t.reset_form.password},on:{input:function(s){s.target.composing||t.$set(t.reset_form,"password",s.target.value)}}})]),t._v(" "),t._m(0)]),t._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-auto col-form-label",attrs:{for:"password-reset-password_confirmation"}},[t._v("\n                "+t._s(t.array_get(t.trans,"module.password_confirmation"))+"\n              ")]),t._v(" "),s("div",{staticClass:"col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.reset_form.password_confirmation,expression:"reset_form.password_confirmation"}],staticClass:"form-control",attrs:{id:"password-reset-password_confirmation",type:"password",autocomplete:"off",required:""},domProps:{value:t.reset_form.password_confirmation},on:{input:function(s){s.target.composing||t.$set(t.reset_form,"password_confirmation",s.target.value)}}})]),t._v(" "),t._m(1)]),t._v(" "),s("div",{staticClass:"row align-items-center mt-4"},[s("div",{staticClass:"col-sm text-md-right col-xs-12 text-center mt-4 mt-md-2"},[s("a",{staticClass:"btn btn-secondary btn-lg rounded",class:{disabled:t.updating},attrs:{href:t.urls.logout}},[t._v("\n                  "+t._s(t.array_get(t.trans,"module.button.logout"))+"\n                ")]),t._v(" "),t.updating?s("button",{staticClass:"btn btn-main btn-lg rounded",attrs:{type:"button",disabled:""}},[t._v("\n                  "+t._s(t.array_get(t.trans,"module.button.updating"))+"\n                ")]):s("button",{staticClass:"btn btn-main btn-lg rounded",attrs:{type:"button"},on:{click:function(s){return t.resetPassword()}}},[t._v("\n                  "+t._s(t.array_get(t.trans,"module.button.update"))+"\n                ")])])]),t._v(" "),s("div",{staticClass:"alert alert-danger error fade mt-3",class:{show:t.filled(t.reset_error)},attrs:{role:"alert"}},[s("span",{staticClass:"text"},[t._v(t._s(t.reset_error)+" ")])])])])]),t._v(" "),s("div",{staticClass:"col d-md-block d-none"},[s("div",{staticClass:"welcome-panl"},[s("h2",{staticClass:"mb-3"},[t._v(t._s(t.array_get(t.trans,"module.topic")))]),t._v(" "),s("p",{domProps:{innerHTML:t._s(t.array_get(t.trans,"module.information"))}})])])])]),t._v(" "),s("div",{staticClass:"login-footer"},[s("div",{staticClass:"login-copyright mb-3"},[s("p",[t._v("Copyright © "+t._s(t.array_get(t.footer,"author"))+" "+t._s(t.array_get(t.footer,"year")))])])]),t._v(" "),t.filled(t.backgrounds)?s("div",{staticClass:"login-bg"},[s("div",{staticClass:"swiper-container",attrs:{id:"login-swiper"}},[s("div",{staticClass:"swiper-wrapper"},t._l(t.backgrounds,(function(t){return s("div",{staticClass:"swiper-slide"},[s("img",{attrs:{src:t,alt:""}})])})),0)])]):t._e()])}),[function(){var t=this._self._c;return t("div",{staticClass:"col-auto d-none d-sm-block"},[t("i",{staticClass:"icon-key2 h2 text-muted"})])},function(){var t=this._self._c;return t("div",{staticClass:"col-auto d-none d-sm-block"},[t("i",{staticClass:"icon-message-typing h2 text-muted"})])}],!1,null,null,null).exports}}]);
//# sourceMappingURL=Site-PasswordReset.js.map